{% extends 'components/base.html' %}
{% load static %}

    {% block styles %}

    {% endblock %}
    
        {% block content %}
            <!-- PAGE-HEADER -->
            <div class="page-header">
                <div>
                    <h1 class="page-title">Contatos</h1>
                </div>
                <div class="ms-auto pageheader-btn">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">Apps</li>
                        <li class="breadcrumb-item active" aria-current="page"><a href="javascript:void(0);">Contatos</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Lista</li>
                    </ol>
                </div>
            </div>
            <!-- PAGE-HEADER END -->

            <!-- ROW-1 -->
            <div class="row">
                <div class="col-lg-6 col-sm-12 col-md-6 col-xl-4">
                    <div class="card overflow-hidden">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h3 class="mb-2 fw-bold">{{ativos}}</h3>
                                    <p class="fs-13 mb-0">Contatos de Clientes</p>
                                </div>
                                <div class="col col-auto top-icn dash">
                                    <div class="counter-icon c-bg-teal ms-auto box-shadow-primary">
                                        <svg class="fill-white" enable-background="new 0 0 24 24" viewBox="0 0 24 24">
                                            <path fill="currentColor" d="M12,19.2C9.5,19.2 7.29,17.92 6,16C6.03,14 10,12.9 12,12.9C14,12.9 17.97,14 18,16C16.71,17.92 14.5,19.2 12,19.2M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z" />
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 col-sm-12 col-md-6 col-xl-4">
                    <div class="card overflow-hidden">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h3 class="mb-2 fw-bold">{{inativos}}</h3>
                                    <p class="fs-13 mb-0">Contatos não associados</p>
                                </div>
                                <div class="col col-auto top-icn dash">
                                    <div class="counter-icon c-bg-red ms-auto box-shadow-info">
                                        <svg class="fill-white" enable-background="new 0 0 24 24" viewBox="0 0 24 24">
                                            <path fill="currentColor" d="M12,19.2C9.5,19.2 7.29,17.92 6,16C6.03,14 10,12.9 12,12.9C14,12.9 17.97,14 18,16C16.71,17.92 14.5,19.2 12,19.2M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z" />
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-sm-12 col-md-6 col-xl-4">
                    <div class="card overflow-hidden">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h3 class="mb-2 fw-bold">{{total}}</h3>
                                    <p class="fs-13 mb-0">Contatos no total</p>
                                </div>
                                <div class="col col-auto top-icn dash">
                                    <div class="counter-icon c-bg-green ms-auto box-shadow-warning">
                                        <svg class="fill-white" enable-background="new 0 0 24 24" viewBox="0 0 24 24">
                                            <path fill="currentColor" d="M12,19.2C9.5,19.2 7.29,17.92 6,16C6.03,14 10,12.9 12,12.9C14,12.9 17.97,14 18,16C16.71,17.92 14.5,19.2 12,19.2M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z" />
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ROW-1 END-->

            <!-- ROW-2 -->
            <div class="row">
                <div class="btns_container">
                    <button class="btn btn-primary" > <i class="fa fa-plus-square-o"></i> Novo Contato</button>
                    <button 
                    id="button1" 
                    type="button" 
                    class="btn btn-warning"
                    disabled> <i class="fa fa-plus-square-o"></i> Visualizar Contato</button>
                    <button class="btn btn-info" id="button" disabled> <i class="fa fa-pencil-square-o" ></i> Editar Contato</button>
                </div>
            </div>
            <!-- ROW-2 END -->

            <!-- ROW-3 -->
            <div class="row">
                <div class="col-12 col-sm-12">
                    <div class="card product-sales-main">
                        <div class="card-header border-bottom">
                            <h3 class="card-title mb-0">Task List</h3>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table id="data-table" class="table text-nowrap mb-0 table-bordered">
                                    <thead class="table-head">
                                        <tr>
                                            <th class="bg-transparent border-bottom-0">ID</th>
                                            <th class="bg-transparent border-bottom-0">Avatar</th>
                                            <th class="bg-transparent border-bottom-0">Nome</th>
                                            <th class="bg-transparent border-bottom-0">E-Mail</th>
                                            <th class="bg-transparent border-bottom-0">Telefone</th>
                                            <th class="bg-transparent border-bottom-0 no-btn">Razão</th>
                                            <th class="bg-transparent border-bottom-0 no-btn">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody class="table-body" id="tabelaSelec">
                                        {% for contato in contatos %}

                                        <tr class="text-dark">
                                            <td>
                                                {{contato.id}}
                                            </td>
                                            <td><img src="{{contato.avatar.url}}" alt="profile-user" class="avatar  profile-user brround cover-image">__{{contato.avatar}}</td>
                                            <td><a href="project-details" class="text-dark">{{contato.nome}}</a></td>
                                            <td>{{contato.email}}</td>
                                            <td>
                                                {{contato.telefone}}
                                            </td>
                                            <td>
                                                {{contato.razao_social}}
                                            </td>
                                            <td>
                                                <span class="status-indicator projects completed">{{contato.status}}</span>
                                            </td>
                                        </tr>

                                        {% endfor %}
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div><!-- COL END -->
            </div>
            <!-- ROW-3 END -->
            <script>
                var table = document.getElementById("tabelaSelec");
                var linha = document.getElementById("tr")
                var botao = document.getElementById("button")
                var botao = document.getElementById("button1")
                table.addEventListener("click", function() {
                    var linhasSelecionadas = table.querySelectorAll("tr.selecionado");
                    console.log("clinado na tabela");
                    if (linha !== null && linha !== '') {
                    document.getElementById("button").disabled = true;
                    } else {
                //desabilita o botão se o conteúdo do input ficar em branco
                document.getElementById("button").disabled = false;
                    }
                    if (linha !== null && linha !== '') {
                        document.getElementById("button1").disabled = true;
                        } else {
                    //desabilita o botão se o conteúdo do input ficar em branco
                    document.getElementById("button1").disabled = false;
                        }
                });
                
                </script>
                <script>
                // Selecione todas as linhas da tabela que você deseja tornar selecionáveis.
                const linhasSelecionaveis = document.querySelectorAll('.text-dark');
    
                // Adicione um ouvinte de evento de clique a cada linha selecionável.
                linhasSelecionaveis.forEach(linha => {
                  linha.addEventListener('click', () => {
                    // Remova a cor de fundo de todas as linhas selecionadas anteriormente.
                    linhasSelecionaveis.forEach(linha => {
                      linha.style.backgroundColor = '';
                    });
                
                    // Defina a cor de fundo da linha atual como a cor selecionada.
                    linha.style.backgroundColor = '#99BB64';
                    linha.style.bg-opacity-25;
                  });
                });
        
                </script>
    
		{% endblock %}

    {% block scripts %}
	<!-- INTERNAL SELECT2 JS -->
	<script src="{% static 'assets/plugins/select2/select2.full.min.js'%}"></script>

	<!-- INTERNAL Data tables js-->
	<script src="{% static 'assets/plugins/datatable/js/jquery.dataTables.min.js'%}"></script>
	<script src="{% static 'assets/plugins/datatable/js/dataTables.bootstrap5.js'%}"></script>
	<script src="{% static 'assets/plugins/datatable/dataTables.responsive.min.js'%}"></script>

	<!-- INDEX JS -->
	<script src="{% static 'assets/js/index1.js'%}"></script>
    {% endblock %}